/* 20100602 1435 */
/* mod login @author jingwei */
(function(e){e.login={};e.login.defaults={css:"1",ssourl:"http://i.house.sina.com.cn/js/sso.js",autoComplete:true,timer:"0",map:true,uId:"lejuName",pId:"lejuPWD",loginId:"lejLoginBtn",openurl:""};e.fn.login=function(b){var b=e.extend({},e.login.defaults,b);return this.each(function(){var n=e(this),g=b.uId,m=b.pId,o=b.loginId,h=b.autoComplete,v=b.autoT,r=b.autoW,Q=b.map,q=l(b.css),s=true,t=[],p=b.openurl;n.html('<span style="font:12px/23px arial;">\u6b63\u5728\u767b\u5f55\uff0c\u8bf7\u7a0d\u540e</span>');sinaSSOConfig=new function(){this.customLoginCallBack=function(y){j({result:y.result,html:q,open:p,name:y.userinfo})};this.customLogoutCallBack=function(){s=true;j({result:false,html:q,area:t})}};e.ajax({type:"GET",url:b.ssourl,dataType:"script",scriptCharset:"utf-8"});function i(A){var z=e(A.html);if(A.result){var y=z.find("#choseLoginArea");z.find("form").remove();n.html(z).css({"float":"left"});e("#lejuLoginBox").html("\u60a8\u597d\uff0c"+A.name.nick+'<div id="lejuChoseAreaBox" style="display:inline;"></div>&nbsp;<a href="http://i.house.sina.com.cn/">\u4f1a\u5458\u4e2d\u5fc3</a>&nbsp;<a href="http://i.house.sina.com.cn/focus/set.php/">\u5df2\u5173\u6ce8\u697c\u76d8</a>&nbsp;<a href="http://website.bbs.house.sina.com.cn/my.php?item=favorites&type=forum">\u5df2\u6536\u85cf\u8bba\u575b</a>&nbsp;<a href="#" id="ssologout">[\u9000\u51fa]</a>');e("#ssologout").click(function(){lejuSSOController.logout();return false});if(Q){e("#lejuChoseAreaBox").append(y);e("#choseLoginArea").blur(function(){e("#choseLoginArea ul").css("visibility","hidden")}).focus(function(){w(A,A.result,e(this))}).click(function(B){if(jQuery.browser.opera){w(A,A.result,e(this));B.stopPropagation();var C=function(){e("#choseLoginArea ul").css("visibility","hidden");e(document).unbind("click",C)};e(document).bind("click",C)}})}return false}else{z.find("#"+o).click(function(){var B=e("#"+g).attr("value");var C=e("#"+m).attr("value");u(B,C)});if(Q){z.find("#choseLoginArea").blur(function(){e("#choseLoginArea ul").css("visibility","hidden")}).focus(function(){w(A,A.result,e(this))}).click(function(B){if(jQuery.browser.opera){w(A,A.result,e(this));B.stopPropagation();var C=function(){e("#choseLoginArea ul").css("visibility","hidden");e(document).unbind("click",C)};e(document).bind("click",C)}})}}n.html(z).css({"float":"left"});if(!A.result&&h){f()}}function j(y){var z=lejuSSOController.gotoArea();if(!!y.result){if(!!!y.open){i({result:y.result,html:y.html,area:z,name:y.name})}else{window.location.href=y.open}}else{if(s){i({result:y.result,html:y.html,area:z})}else{alert("\u767b\u9646\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u60a8\u7684\u7528\u6237\u540d\u53ca\u5bc6\u7801");i({result:y.result,html:y.html,area:z})}}s=false}function u(y,z){if(!!!y||!!!z){switch(!!!y){case true:alert("\u8bf7\u586b\u5199\u7528\u6237\u540d");break;case false:alert("\u8bf7\u586b\u5199\u5bc6\u7801");break}return false}else{n.html('<span style="font:12px/23px arial;">\u6b63\u5728\u767b\u5f55\uff0c\u8bf7\u7a0d\u540e</span>');lejuSSOController.login(y,z,1)}}function f(){var z=function(A){e("#lejuLoginAutoSuggest").css("visibility","hidden");A.stopPropagation()};var y;e("#"+g).triggerHandler("focusin");e("#"+g).focus(function(){e(document).bind("click",z);if(!!!y){y=lejuSSOController.getSuggestList()}}).keyup(function(A){if(A.keyCode=="27"){e("#lejuLoginAutoSuggest").css("visibility","hidden");return false}var B=e(this).attr("value");if(!!!(B)){e("#lejuLoginAutoSuggest").css("visibility","hidden")}else{e.lejuLoginTimeout("nameSuggest");e.lejuLoginTimeout("nameSuggest",b.timer,function(){x(y,B)})}});e.each([e("#"+m),e("#choseLoginArea")],function(B,A){A.focus(function(){e(document).unbind("click",z);e("#lejuLoginAutoSuggest").css("visibility","hidden")}).click(function(){e(document).unbind("click",z);e("#lejuLoginAutoSuggest").css("visibility","hidden")})})}function x(C,y){var A=[];var z=y.indexOf("@");if(z>0){A='<li id="lejuLoginChoseType" style="padding:0 5px;float:none;">\u8bf7\u9009\u62e9\u767b\u9646\u7c7b\u578b</li>';A+='<li id="#lejuLoginBaseVal" class="on" style="padding:0 5px;float:none;">'+y+"</li>";var B=y.substring(z);if(B=="@"){e("#lejuLoginBaseVal").html(y);return false}else{y=y.substr(0,z);e.each(C,function(D,E){if(B==E.substr(0,B.length)){A+='<li style="padding:0 5px;float:none;">'+y+E+"</li>"}})}}else{A='<li id="lejuLoginChoseType" style="padding:0 5px;float:none;">\u8bf7\u9009\u62e9\u767b\u9646\u7c7b\u578b</li>';A+='<li id="lejuLoginBaseVal" class="on" style="padding:0 5px;float:none;">'+y+"</li>";e.each(C,function(D,E){A+='<li style="padding:0 5px;float:none;">'+y+E+"</li>"});A+='<li id="lejuLoginNoSinaMail" style="padding:0 5px;float:none;">'+y+"@\u975e\u65b0\u6d6a\u90ae\u7bb1</li>"}e("#lejuLoginAutoSuggest").html(A).css("visibility","visible");e("#lejuLoginAutoSuggest li").one("click",function(D){if(!!!(this.id)){e("#"+g).attr({value:this.innerHTML})}D.stopPropagation();e("#lejuLoginAutoSuggest").css("visibility","hidden")}).hover(function(){e(this).css({"background-color":"#E8F4FC"}).addClass("on")},function(){e(this).css({"background-color":""}).removeClass("on")})}function w(y,z,B){if(!!!B.find("ul").html()){var A=[];e.each(y.area.list,function(C,D){A+="<li><a href='"+D.url+"' style='text-decoration:none; color:#999; display:block;'>"+D.name+"</a></li>"});B.find("ul").html(A).css("visibility","visible")}else{B.find("ul").css("visibility","visible")}B.find("a").click(function(){if(!z){var C=e("#"+g).attr("value");var D=e("#"+m).attr("value");if(!!!C||!!!D){p=e(this).attr("href");B.find("span").html(e(this).html());B.find("ul").css("visibility","hidden");B.blur();return false}p=e(this).attr("href");u(C,D);B.find("ul").css("visibility","hidden");B.blur();return false}}).hover(function(){e(this).css({"background-color":"#E8F4FC"})},function(){e(this).css({"background-color":""})})}function l(z){var z=z;if(z.length==1){switch(z){case"1":z="";break}}var y="<div id='lejuLoginBox' style='position:relative; z-index:99999;'><form method='post' action='' target='_self' autocomplete='off' onsubmit='return false;'><ul class='login'><li><label for='"+g+"'>\u767b\u5f55\u540d</label></li>";y+="<li style='position:relative; z-index:9999; outline:0;'>";y+="<input type='input' value='' class='text' id='"+g+"'></input>";if(h){y+="<ul id='lejuLoginAutoSuggest' tabIndex='' style='position:absolute; left:0; top:20px; cursor:pointer; margin:0 1px; padding:0; list-style:none; width:200px; overflow:hidden; background:#FFF; font:12px/1.6 arial; border:1px solid #CCC; visibility:hidden; color:#999;'></ul>"}y+="</li>";y+="<li><label for='"+m+"'>\u5bc6\u7801</label></li><li><input type='password' value='' class='text' id='"+m+"'></input></li>";if(Q){y+="<li><div id='choseLoginArea' tabIndex='' style='position:relative; _top:1px; display:inline-block; zoom: 1; *display: inline; outline:0; font:12px/18px arial; height:18px; vertical-align:top; margin:0 5px 0 0; cursor:pointer; background:#FFF url(http://i1.sinaimg.cn/hs/lvbing/Q1/lejuhome_0903_kgy_002.gif) no-repeat; width:84px; text-indent:8px;'><span>\u9009\u62e9\u53bb\u5411</span><ul style='visibility:hidden; position:absolute; left:0; top:20px; cursor:pointer; margin:0 1px; padding:0; list-style:none; font:12px/18px arial; border:1px solid #CCC; width:82px; background:#FFF;'></ul></div></li>"}y+="<li><input type='submit' value='' class='btn' id='"+o+"'></li><li><a href='http://i.house.sina.com.cn/reg_api.php'>\u6ce8\u518c</a></li><li><a href='http://login.sina.com.cn/getpass.html'>\u627e\u56de\u5bc6\u7801</a></li></ul></form></div>";z=z+y;return z}});return e};c="lejuLoginTimeout",d=Array.prototype.slice;e[c]=function(){return a.apply(window,[0].concat(d.call(arguments)))};e.fn[c]=function(){var b=d.call(arguments),f=a.apply(this,[c+b[0]].concat(b));return typeof b[0]==="number"||typeof b[1]==="number"?this:f};function a(f){var b=this,t,q={},u=f?e.fn:e,z=arguments,s=4,w=z[1],r=z[2],v=z[3];if(typeof w!=="string"){s--;w=f=0;r=z[1];v=z[2]}if(f){t=b.eq(0);t.data(f,q=t.data(f)||{})}else{if(w){q=e.login[w]||(e.login[w]={})}}q.id&&clearTimeout(q.id);delete q.id;function x(){if(f){t.removeData(f)}else{if(w){delete e.login[w]}}}function y(){q.id=setTimeout(function(){q.fn()},r)}if(v){q.fn=function(g){if(typeof v==="string"){v=u[v]}v.apply(b,d.call(z,s))===true&&!g?y():x()};y()}else{if(q.fn){r===undefined?x():q.fn(r===false);return true}else{x()}}}})(jQuery);
/*  mod tab @author jingwei */
(function(b){b.tab={};b.tab.defaults={navbox:".tab",navTag:"a",active:"tab_active",hidden:"tab_hide",event:"mouseover",ajax:true,ajaxOptions:null};b.fn.tab=function(a,e){var f=arguments.length>0&&typeof(arguments[0])=="function"?0:1;e=arguments[f];var a=b.extend({},b.tab.defaults,a);return this.each(function(){var j=b(this);useAjax=a.ajax,ajaxOptions=a.ajaxOptions,navObj=j.find(a.navbox).find(a.navTag),eventType=a.event,activeClass=a.active,hideClass=a.hidden;var n={};b.each(navObj,function(g){if(b(this).hasClass(activeClass)){n.tabObj=b(this);n.boxObj=b(this).attr("tab")}});o(useAjax,ajaxOptions,e);function m(g,i,h,q){if(i){var p=b.trim(b(g).html());if(!!!p){var r=b(n.tabObj).attr("ajax");b.ajax(b.extend({},h,{url:r,success:function(s){b(g).html(s);l(g,q)}}));return false}}l(g,q)}function o(i,h,g){var p;navObj.bind(eventType,function(){p=b(this).attr("tab");if(!b(this).hasClass(activeClass)){n.tabObj.removeClass(activeClass);b(this).addClass(activeClass);n.tabObj=b(this)}m(p,i,h,g)})}function l(h,g){if(h!=n.boxObj){b(n.boxObj).addClass(hideClass);b(h).removeClass(hideClass);n.boxObj=h;if(!!g){g()}}}})}})(jQuery);
/* mod slide @author jingwei */
(function(f){f.slide={};f.slide.defaults={event:"mouseover",duration:"normal",time:"6000",after:"",width:null,height:null,imgw:null,imgh:null,order:null};f.fn.slide=function(a,e){var h=arguments.length>0&&typeof(arguments[0])=="function"?0:1;e=arguments[h];var a=f.extend({},f.slide.defaults,a);return this.each(function(){var H=a.time,g=a.event,L=parseInt(a.width),J=parseInt(a.height),G=f(this),Q=G.find("ol"),R=G.find("li"),O=G.find("img"),P=a.after,B=a.order,T=a.duration,D=a.imgw||L,F=heightbase=a.imgh||J,N=liObjLen=0,E=animateMax=false,M=0;K();S(function(){liObjLen=R.length;N=heightbase*liObjLen;if(liObjLen>1){f.slideTimer("slide",H,function(){C()})}});I(["#slideNum span","#slideNum",O]);f("#slideNum span").bind(g,function(){if(!f(this).hasClass("current")){Q.stop(true,true);var i=parseInt(f(this).html());f.slideTimer("slideanimate",200,function(){C(i,true)})}});function I(i){f.each(i,function(l,j){if(typeof(j)!="object"){j=f(j)}if(liObjLen>1){j.hover(function(){f.slideTimer("slide")},function(){f.slideTimer("slideanimate");f.slideTimer("slide",H,function(){C()})})}})}function C(i,j){if(!!!Q.is(":animated")){if(!!i&&i!=1){M=i-2;animateMax=false;if(i==liObjLen){M=i-1;animateMax=true}}else{if(!!i&&i==1){if(!animateMax){M=i-2}animateMax=false}else{animateMax=false}}var l=animateMax?liObjLen-1:++M;if(M==liObjLen){M=0;E=true}else{E=false}F=heightbase*(l);f("#slideNum span.current").removeClass("current");f("#slideNum span").eq(M).addClass("current");if(E){R.eq(0).css({position:"relative",top:heightbase*liObjLen,display:"block","float":"left"})}Q.animate({top:"-"+F+"px"},{queue:false,duration:T,complete:function(){if(E){Q.css({top:0});R.eq(0).removeAttr("style")}if(!!!j){f.slideTimer("slide",H,function(){C()})}}})}}function S(i){var j;f.each(O,function(l,m){j=P+f(this).attr("slidesrc");f(this).attr({src:j})});i()}function K(){G.css({width:L,height:J,position:"relative",overflow:"hidden"});var l="";if(!!B){var i=[];i=B.split("_");f.each(i,function(n,m){l+="<li>"+R.eq(m-1).html()+"</li>"});Q.html(l);R=G.find("li");O=G.find("img")}Q.css({position:"absolute"});R.css({width:L,height:J});l="";var j=(J-23);f.each(R,function(m){m++;m==1?l+='<span class="current" style="border:1px solid #000;display:inline-block;width:17px;height:17px;text-align:center;font:10px/17px arial;margin-right:5px;color:#FFF;cursor:pointer;">'+m+"</span>":l+='<span style="border:1px solid #000;display:inline-block;width:17px;height:17px;text-align:center;font:10px/17px arial;margin-right:5px;color:#FFF;cursor:pointer;">'+m+"</span>"});G.append('<div id="slideNum" style="position:relative;top:'+j+'px;right:0;text-align:right">'+l+"</div>")}})};c="slideTimer",d=Array.prototype.slice;f[c]=function(){return b.apply(window,[0].concat(d.call(arguments)))};f.fn[c]=function(){var a=d.call(arguments),e=b.apply(this,[c+a[0]].concat(a));return typeof a[0]==="number"||typeof a[1]==="number"?this:e};function b(p){var B=this,l,o={},j=p?f.fn:f,a=arguments,m=4,h=a[1],n=a[2],i=a[3];if(typeof h!=="string"){m--;h=p=0;n=a[1];i=a[2]}if(p){l=B.eq(0);l.data(p,o=l.data(p)||{})}else{if(h){o=f.slide[h]||(f.slide[h]={})}}o.id&&clearTimeout(o.id);delete o.id;function g(){if(p){l.removeData(p)}else{if(h){delete f.slide[h]}}}function e(){o.id=setTimeout(function(){o.fn()},n)}if(i){o.fn=function(q){if(typeof i==="string"){i=j[i]}i.apply(B,d.call(a,m))===true&&!q?e():g()};e()}else{if(o.fn){n===undefined?g():o.fn(n===false);return true}else{g()}}}})(jQuery);
/* mod lazyload @author kangsai */
(function(l){l.lazyload={};l.lazyload.defaults={container:window,placeholder:"",defined_src:"lazy-load-src",threshold:0,direction:1,delay:100,lock:false,timer:null,set:null};l.fn.lazyload=function(a){var a=l.extend(l.lazyload.defaults,a);a.elements=l(this);a.lastScroll=0;a.threshold=j(a);n(a);a.set=function(){i(a)};l(a.container).bind("scroll",a.set);l(a.container).bind("resize",a.set)};function n(f){var b=o(f);var a=f.lastScroll;var g=b;f.lastScroll=b;var e=m(a,g);var p=l(window).height();if(e==1){if(g-a>p){a=g-p}a-=f.threshold;g+=f.threshold;h(f,a,g)}else{if(e==2){if(a-g>p){a=g+p}a+=f.threshold;g=g-p-f.threshold;h(f,g,a)}}}function h(b,a,e){if(b.elements.length==0){l(b.container).unbind("scroll",b.set);l(b.container).unbind("resize",b.set);return false}b.elements.each(function(q){var f=l(this);var g=f.offset().top;var p=g+f.height();if((g>=a&&g<=e)||(p>=a&&p<=e)){if(f.attr(b.defined_src)){f.attr("src",f.attr(b.defined_src));f.removeAttr(b.defined_src)}}else{if(f.attr(b.defined_src)&&b.placeholder){f.attr("src",b.placeholder)}}});b.elements=l("img["+b.defined_src+"]")}function o(a){return l(window).height()+l(window).scrollTop()}function m(a,e){var b=1;if(a-e>0){b=2}else{if(a-e<0){b=1}}return b}function i(a){clearTimeout(a.timer);if(a.lock){a.timer=setTimeout(function(){i(a)},a.delay)}else{a.lock=true;n(a);setTimeout(function(){a.lock=false},a.delay)}}function j(a){if(a.threshold>100){a.threshold=100}return a.threshold*l(window).height()/100}})(jQuery);
/* mode weather @author jingwei */
(function(a){a.weather={};a.weather.defaults={city:null};a.fn.weather=function(g,b){var f=arguments.length>0&&typeof(arguments[0])=="function"?0:1;b=arguments[f];var g=a.extend({},a.weather.defaults,g);return this.each(function(){var l=a(this),m=null,p=g.city,e=document.domain.replace(".house.sina.com.cn",""),n=null,i="\u8f7d\u5165\u4e2d";if(p!=null){a("#locationCity").html(p);a("#weather").html(i)};$.ajax({type:"GET",url:"http://bj.house.sina.com.cn/567/2010/0510/12.js",async:false,dataType:"script",scriptCharset:"utf-8",success:function(){var m=weatherList();e=m[e];n="http://php.weather.sina.com.cn/js.php?city="+e;if(p==null){a("#locationCity").html(e)}if(n!=null){a.getScript(n,function(){var h="http://i2.sinaimg.cn/hs/lvbing/Q3/"+figure1+"_big.gif";if(status1!=status2){i='<img src="'+h+'" alt="'+status2+'" width="20" height="20" /> '+status1+"\u8f6c"+status2+" "+temperature1+"\u2103\uff5e"+temperature2+"\u2103"}else{i='<img src="'+h+'" alt="'+status2+'" width="20" height="20" /> '+status2+" "+temperature1+"\u2103\uff5e"+temperature2+"\u2103"}a("#weather").html(i)})}else{i="\u6682\u65e0";a("#weather").html(i)}a("#locationPop p a").click(function(){var h=a(this).html();o(h);return false});a("#pop_submit").click(function(){var h=a("#pop_city").val();if(h!=undefined&&h!="\u8bf7\u8f93\u5165\u57ce\u5e02\u540d"){o(h)}else{alert("\u8bf7\u8f93\u5165\u57ce\u5e02\u540d")}});function o(i){var h;a.each(m,function(j,q){if(q==i){h="http://"+j+".house.sina.com.cn";return false}});if(h!=undefined){window.location.href=h}else{alert("\u6682\u65e0\u6b64\u7ad9")}}}});a("#locationWeater").hover(function(){a("#locationPop").show()},function(){a("#locationPop").hide()})})}})(jQuery);